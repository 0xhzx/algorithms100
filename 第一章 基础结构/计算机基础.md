# 计算机基础

## 计算机起源
计算机有两个源头：控制与运算。运算器从算筹、算盘时代就开始发展。控制思想来源于卡片提花机。
提花机是专用于精美图案的织布机，传统提花机手工控制丝线，被称为“操纵牵线木偶”，复杂且重复。纺织革命中采用纸带凿孔控制顶针穿入，成为程序思想的由来。至此计算机的两个源头都已具备，机械计算机、垫子计算机自然诞生。算力随着摩尔定律突飞猛进，算法的重要性更加凸显。

### 轶闻：
* J.Jacquard设计出自动提花编织机后遭到大量纺织工人反对，仍然迅速流行开来。在人工智能时代有何发展策略？
* 北京大学计算机专业起源于数学系，清华大学计算机专业起源于自动控制系。

## 计算机结构
![avatar]()
输入
cpu：控制器+运算器
核心1 核心2 .。。
L1 L2 私有缓存
L3 缓存
主存
输出
线程

cpu的速度高于缓存，缓存高于主存，主存高于IO设备。因此cpu先访问缓存，没有命中则访问主存。缓存会读取内存目标地址附近一整块数据，因为近邻访问率高，称之局部性原理，所以数组邻访问近加速效果明显。

## 线程同步
启动一次程序，形成一个进程，拥有所有的计算机资源，信息存储于主存中。进程向cpu分发线程，分配到一个核形成一个线程。线程的信息存储于缓存中，线程也可以退出cpu运算，暂存于主存中。进程之间内存互相隔离。同一个进程的多个线程之间可以各自访问进程所属内存。
现代计算机由多个核心，可以并行执行多个线程，他们都可以随时修改修改内存。若需要内存数据对于所有线程一致，可加锁同步。Compare and Swap是一种乐观锁，内存中A传入线程，线程返回其输入值A、输出值B，若此时内存中仍为A，则可以认为内存未变化，线程操作有效，内存中A替换为B。此方法由硬件实现，效率高，适合原子计数等一些简单任务。若上例中内存数据变化为ABA，在线程返回结果来看主存一直是A。为应对此类复杂同步需要互斥锁，一次仅允许一个线程访问。可给值贴前缀标签，1A 2B 3A，线程返回1A与现值3A不同，则认为线程操作无效。

## 编译优化
python、java、C++都是高级语言，编译器将其编译为汇编、机器指令供机器执行。高级语言编写的程序并不与机器指令严格对应。编译器优化时，认为可以省略的步骤会忽略，认为可以并行执行的语句会交给cpu乱序执行。编写程序的大部分时间都在调试，先实现，再优化。

